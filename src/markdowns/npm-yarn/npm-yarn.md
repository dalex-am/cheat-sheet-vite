### Разница между Yarn и npm

Разница между **Yarn** и **npm** заключается в подходе к управлению зависимостями в JavaScript-проектах. Оба являются пакетными менеджерами, но имеют различия в производительности, безопасности и особенностях работы.

---

### Основные различия

| Характеристика      | npm                                    | Yarn                                          |
| ------------------- | -------------------------------------- | --------------------------------------------- |
| **Разработчик**     | npm, Inc. (часть GitHub/Microsoft)     | Facebook (теперь OpenJS Foundation)           |
| **Год выпуска**     | 2010                                   | 2016                                          |
| **Основа**          | Изначальный менеджер Node.js           | Создан для устранения недостатков npm         |
| **Скорость**        | Медленнее (особенно в старых версиях)  | Быстрее (кеширование, параллельные загрузки)  |
| **Безопасность**    | Раньше была уязвимость в `npm install` | Более строгие проверки целостности (checksum) |
| **Lock-файл**       | `package-lock.json`                    | `yarn.lock`                                   |
| **CLI-команды**     | `npm install`, `npm run` и т.д.        | `yarn add`, `yarn install` и т.д.             |
| **Автоисправление** | Нет (требует `npm audit fix`)          | Есть (`yarn audit --fix`)                     |
| **Оффлайн-режим**   | Есть (с v5)                            | Есть (кеширует пакеты локально)               |
| **Workspaces**      | Поддержка (с v7)                       | Лучшая поддержка (изначально)                 |

---

### Ключевые команды

#### Установка пакетов

| Действие               | npm                        | Yarn                        |
| ---------------------- | -------------------------- | --------------------------- |
| Установка зависимостей | `npm install`              | `yarn install`              |
| Добавить пакет         | `npm install <package>`    | `yarn add <package>`        |
| Удалить пакет          | `npm uninstall <package>`  | `yarn remove <package>`     |
| Глобальная установка   | `npm install -g <package>` | `yarn global add <package>` |

#### Запуск скриптов

| Действие       | npm                | Yarn            |
| -------------- | ------------------ | --------------- |
| Запуск скрипта | `npm run <script>` | `yarn <script>` |
| Запуск `start` | `npm start`        | `yarn start`    |
| Запуск `test`  | `npm test`         | `yarn test`     |

#### Обновление зависимостей

| Действие             | npm                    | Yarn                     |
| -------------------- | ---------------------- | ------------------------ |
| Обновить пакет       | `npm update <package>` | `yarn upgrade <package>` |
| Проверить устаревшие | `npm outdated`         | `yarn outdated`          |

---

### Плюсы и минусы

#### npm

✅ **Плюсы:**

- Стандартный менеджер для Node.js (не требует установки).
- Улучшенная скорость в новых версиях (npm ≥5).
- Хорошая поддержка сообщества.

❌ **Минусы:**

- Раньше был медленнее Yarn.
- Менее строгий контроль целостности пакетов.

#### Yarn

✅ **Плюсы:**

- Быстрее (кеширование + параллельные загрузки).
- Более надежный lock-файл (`yarn.lock`).
- Лучшая поддержка монорепозиториев (Workspaces).

❌ **Минусы:**

- Требует отдельной установки.
- В некоторых случаях может быть избыточным.

---

#### Система версионирования SemVer (семантическое версионирование)

Номер версии в SemVer записывается в формате MAJOR.MINOR.PATCH. Каждое число имеет своё значение:\
**MAJOR** — масштабные изменения, которые могут повлиять на совместимость модуля с другими пакетами.\
**MINOR** — интеграция новых функций, которые не мешают продолжать использовать пакет в проекте.\
**PATCH** — исправления ошибок, которые никак не влияют на функции и возможности модуля.

В файле package.json символы тильды (~) и каретки (^) используются для указания диапазона версий зависимостей, определяя, как будут обрабатываться обновления при запуске npm install или yarn install. Тильда позволяет обновлять только версии исправлений, не затрагивая основные версии, а каретка позволяет обновлять как версии исправлений, так и основные версии.\
Наконец, есть \*-версия, которая, хотя и доступна, используется не так часто. Основная причина её менее частого использования заключается в том, что она заменяет номер основной, дополнительной или вспомогательной версии и подходит для любого номера версии, который она представляет. Например, зависимость с версией _ будет соответствовать любой версии, которая больше или равна 0.0.0, в то время как 1._ будет соответствовать версиям, большим или равным 1.0.0, но меньшим, чем 2.0.0.

---

### Публикация пакета в npm

#### Подготовка к публикации

- Создание аккаунта

```bash
npm adduser  # или npm login если уже есть аккаунт
```

- Инициализация проекта

```bash
npm init
```

- Структура

```text
your-package/
├── package.json
├── README.md
└── index.js (или другой основной файл)
```

- Ключевые поля package.json

```json
{
  "name": "уникальное-имя-пакета",
  "version": "1.0.0",
  "description": "Описание вашего пакета",
  "main": "index.js",
  "keywords": ["ключевые", "слова"],
  "author": "Ваше Имя <email@example.com>",
  "license": "MIT"
}
```

- Публикация

```bash
npm publish
```

- Семантическое версионирование

```bash
npm version patch  # 1.0.0 → 1.0.1
npm version minor  # 1.0.1 → 1.1.0
npm version major  # 1.1.0 → 2.0.0

npm publish
```
